---
description: Request proofs from your user
---

# Sismo Connect Client: Request

The [Sismo Connect](../../readme/sismo-connect.md) Client is a frontend package built on top of the [Sismo Data Vault app](../data-vault-app.md) (the prover) to easily request proofs from your users. You can see a full guide on how to integrate Sismo Connect into your application [here](../../tutorials/sismo-connect/request-data-privately-with-sismo-connect.md).

## Installation

Install Sismo Connect Client package in your frontend with `npm` or `yarn`:

```bash
# with npm
npm install @sismo-core/sismo-connect-client
# with yarn
yarn add @sismo-core/sismo-connect-client
```

{% hint style="success" %}
Make sure to have at least v18.15.0 as Node version. You can encounter issues with ethers dependencies if not.
{% endhint %}

## Usage

#### Configuration

The first step for integrating Sismo Connect in your frontend is to create a `SismoConnectConfig`. This config will require an `appId` and can be customized with [optional fields.](client.md#sismoconnectclientconfig) You can go to the [Sismo Factory](https://factory.sismo.io/apps-explorer) to register an appId.

```typescript
import { SismoConnect, SismoConnectClientConfig } from "@sismo-core/sismo-connect-client";

const config: SismoConnectClientConfig = {
  // you will need to register an appId in the Factory
  appId: "0x8f347ca31790557391cec39b06f02dc2", 
}

// create a new SismoConnect instance with the client configuration
const sismoConnect = SismoConnect(config);
```

#### Request proofs from your users for a Claim

Request proofs from your users by creating a `ClaimRequest` and calling the `request` function of the sismoConnect client. Only the `groupId` in the `ClaimRequest` is mandatory.

```typescript
import { ClaimRequest } from "@sismo-core/sismo-connect-client";

const CLAIM: ClaimRequest = { 
    // ID of the group the user should be a member of
    groupId: "0x42c768bb8ae79e4c5c05d3b51a4ec74a",
};

// The `request` function sends your user to the Sismo Vault App to generate the proof.
// After the proof generation, the user is redirected with it to your app
sismoConnect.request({ claims: [CLAIM] });
//OR
sismoConnect.request({ claim: CLAIM });
```

#### Request proofs from your users for a Auth

Request proofs from your users by creating a `AuthRequest` and calling the `request` function of the sismoConnect client. Only the `authType` in the `ClaimRequest` is mandatory.

<pre class="language-typescript"><code class="lang-typescript">import { AuthType, AuthRequest } from "@sismo-core/sismo-connect-client";
<strong>
</strong><strong>const AUTH: AuthRequest = { 
</strong>    authType: AuthType.VAULT,
};

sismoConnect.request({ auths: [AUTH] });
//OR
sismoConnect.request({ auth: AUTH });
</code></pre>

#### Request proofs from your users for a SignedMessage

Request proofs from your users by creating a `SignatureRequest` and calling the `request` function of the Sismo Connect client.

<pre class="language-typescript"><code class="lang-typescript">import { SignatureRequest } from "@sismo-core/sismo-connect-client";

const SIGNATURE: SignatureRequest = { 
    message: "Your message here"
};
<strong>
</strong><strong>sismoConnect.request({ signature: SIGNATURE });
</strong></code></pre>

#### Get proofs from your users

Receive proofs in a `sismoConnectResponse` by calling the `getResponse` function when the user is redirected back to your application.

```typescript
// The `getResponse` function returns the proof generated by your user 
// after coming back from the Sismo Vault App.
const sismoConnectResponse = sismoConnect.getResponse();
```

If you want a response usable on-chain you can use the getResponseBytes function.

```typescript
const sismoConnectResponseBytes = sismoConnect.getResponseBytes();
```

## Documentation

#### SismoConnectClientConfig

The `SismoConnectClientConfig` allows you to fully customize your Sismo Connect integration. Its only mandatory field is the `appId`. For more liberty when prototyping, it also comes with an optional devMode field that allows developers to add their addresses and compute cryptographically valid proofs when redirected to the Sismo Developer Vault.

```typescript
export type SismoConnectClientConfig = {
  // the appId registered in the Factory
  appId: string,
  devMode?: {
    // will use the Dev Sismo Data Vault https://dev.vault-beta.sismo.io/
    enabled?: boolean, 
    // Display a modal at the end of the flow with the response to help you 
    // generate response for development purpose
    displayRawResponse?: boolean;
    // Override all groups 
    devGroups?: {
      groupId?: string;
      groupTimestamp?: number | "latest";
      data?: Record<string, Number | BigNumberish>
    }[]
  },
  // url of the Sismo Vault App to redirect to
  vaultAppBaseUrl?: string
  // url of the Sismo API used
  sismoApiUrl?: string
}
```

Here is an example of a customized `SismoConnectClientConfig` with a `devMode` enabled and two developer addresses that will be able to generate valid proofs from their developer [Data Vaults](../../what-is-sismo/data-vault.md).

```typescript
const sismoConnectConfig: sismoConnectClientConfig = {
    // you will need to register an appId in the Factory
    appId: "0x8f347ca31790557391cec39b06f02dc2", 
    // allows to create valid proofs for specific addresses
    // should only be used when prototyping
    // default: undefined
    devMode: {
        // will use the Dev Sismo Data Vault https://dev.vault-beta.sismo.io/
        enabled: true, 
        // overrides a group with these addresses
        devGroups: [{
            groupId: "0x42c768bb8ae79e4c5c05d3b51a4ec74a",
            data: {
                "0x123...abc": 1, 
                "0x456...efa": 2
            },
        }]
    },
    // url of the Sismo Vault App to redirect to
    // default: https://vault-beta.sismo.io
    // automatically move to https://dev.vault-beta.sismo.io when devMode.enabled = true
    vaultAppBaseUrl: "https://dev.vault-beta.sismo.io", 
    // url of the Sismo API used
    // default: https://api.sismo.io
    sismoApiUrl: "https://api.sismo.io"
}
```

#### `ClaimRequest`

The ClaimRequest object holds all the information needed to generate proof of group membership.

<pre class="language-typescript"><code class="lang-typescript">export type ClaimRequest = {
    // The groupId from which the proofs are generated
    groupId?: string;
    // The timestamp of the group from which the proofs are generated
    groupTimestamp?: number | "latest"; // default to "latest"
    // The value used in the statement request
    value?: number; // default to 1
    // comparator use for the requested value
    // can be "GTE" or "EQ"
    claimType?: ClaimType; // default to GTE
    // Make the claim optional
    isOptional?: boolean; // default to false
    // Make the value the user wants to use to prove membership selectable
    isSelectableByUser?: boolean; // default to true
    extraData?: any; // default to ''
}

<strong>export enum ClaimType {
</strong>  EMPTY,
  GTE,
  GT,
}
</code></pre>

Here is an example of a customized `ClaimRequest` that, [when requested](client.md#request), will generate a proof for the latest data of the groupId `0x42c768bb8ae79e4c5c05d3b51a4ec74a` . The user should have exactly a value of 2 in this group.

```typescript
import { ClaimRequest } from "@sismo-core/sismo-connect-client";

const CLAIM: ClaimRequest = { 
    // ID of the group the user should be a member of
    groupId: "0x42c768bb8ae79e4c5c05d3b51a4ec74a",
    // timestamp of the data used for the group
    // default: latest
    groupTimestamp: "latest",
    // value the user should have in the group
    // default: 1
    value: 2, 
    // comparator for the requested value
    // default: "GTE" -> "greater than or equal"
    claimType: ClaimType.EQ,
    isOptional: false;
    isSelectableByUser: true;
};
sismoConnect.request({ claim: CLAIM });
```

#### `AuthRequest`

The AuthRequest object holds all the information needed to generate proof of account ownership.

```typescript
export type AuthRequest = {
  // twitter// github// evmAccount
  authType: AuthType;
  userId?: string; // Request a specific user
  // Make the claim optional
  isOptional?: boolean; // default to false
  // Make the account whose ownership the user wants to prove selectable
  isSelectableByUser?: boolean; // default to true
  // (soonâ„¢) Do not reveal the userId with which the user performs the auth
  isAnon?: boolean; // false
  extraData?: any; // default to ''
}

export enum AuthType {
  EMPTY,
  ANON,
  GITHUB,
  TWITTER,
  EVM_ACCOUNT,
}
```

Here is an example of a customized `AuthRequest` that, [when requested](client.md#request), will generate a proof containing a Github Id. The user should have a GitHub in his vault.

```typescript
import { AuthRequest } from "@sismo-core/sismo-connect-client";

const AUTH: AuthRequest = { 
    authType: AuthType.GITHUB,
};
sismoConnect.request({ auth: AUTH });
```

#### `SignatureMessageRequest`

The `SignatureMessageRequest` contains the message that the user should sign.

```typescript
import { SignatureRequest } from "@sismo-core/sismo-connect-client";

const SIGNATURE: SignatureRequest = { 
    message: "Your message here"
};

sismoConnect.request({ signature: SIGNATURE });
```

#### `request()`

```typescript
function request({ 
    claims, 
    auths, 
    //OR
    claim,
    auth,
    
    signature, 
    namespace, 
    callbackPath 
}: RequestParams): void
```

The `request` function redirects your user to the Sismo Vault App to generate the proof.

```typescript
export type RequestParams = {
  claims?: ClaimRequest[];
  auths?: AuthRequest[];
  //If you have only one claim or one auth
  claim?: ClaimRequest;
  auth?: AuthRequest;
  
  signature?: SignatureRequest;
  namespace?: string;
  // the path to redirect your users with proofs
  // default: empty
  // example: /custom-callback-path
  callbackPath?: string;
};
```

Here is an example of a customized usage of the request function. You want that your users generate a proof in their Sismo Data Vault that proves you they are a member of the group with id `0x42c768bb8ae79e4c5c05d3b51a4ec74a` with at least of value of 2 in it. This proof should be made for the service named "my-private-poll-1" and when generated you want them to be redirected to the path "https://poll.xyz/call-back-path/my-private-poll-1".

<pre class="language-typescript"><code class="lang-typescript">import { ClaimRequest, ClaimType } from "@sismo-core/sismo-connect-client";
<strong>
</strong><strong>const CLAIM: ClaimRequest = { 
</strong>    groupId: "0x42c768bb8ae79e4c5c05d3b51a4ec74a",
    value: 2, 
    claimType: ClaimType.GTE,
};

sismoConnect.request({
    claim: CLAIM,
    namespace: "my-private-poll-1",
    callbackPath: "/call-back-path/my-private-poll-1"
})
</code></pre>

{% hint style="info" %}
Namespace is highly interesting when you want your users to generate proofs for each service in an app. You can see more information about how to use it in the [Sismo Connect Server package documentation](server.md).
{% endhint %}

#### `getResponse()`

```typescript
function getResponse(): SismoConnectResponse | null
```

The `getResponse` function returns the [`SismoConnectResponse`](client.md#sismoconnectresponse) object containing the `verifiableStatements` with proofs generated by your user after coming back from Sismo Vault App. Proofs must be sent to your backend and verified thanks to the [`@sismo-core/sismo-connect-server`](https://www.npmjs.com/package/@sismo-core/sismo-connect-server) package.

#### `getResponseBytes()`

```typescript
function getResponseBytes(): string | null
```

The `getResponseBytes` function returns the response encoded in bytes usable by the [`@sismo-core/sismo-connect-solidity`](https://github.com/sismo-core/sismo-connect-packages/tree/main/packages/sismo-connect-solidity) Librairy.

#### `SismoConnectResponse`

```typescript
type SismoConnectResponse = {
    // the appId registered in the Factory
    appId: string;
    // Sismo Connect version
    version: string;
    // service from which the proof is requested
    namespace?: string;
    signedMessage?: string;
    proofs: SismoConnectProof[]
}

type SismoConnectProof = {
    auths?: Auth[];
    claims?: Claim[];
    provingScheme: string;
    proofData: string;
    extraData: any;
}
```
